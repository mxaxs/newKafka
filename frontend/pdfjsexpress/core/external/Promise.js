(function(t){t.createPromiseCapability=function(){var t={},n=new g((function(n,e){t.resolve=n,t.reject=e}));return t.promise=n,t};var n=t["Promise"],e=n&&"resolve"in n&&"reject"in n&&"all"in n&&"race"in n&&function(){var t;return new n((function(n){t=n})),"function"===typeof t}();"undefined"!==typeof exports&&exports?(exports.Promise=e?n:g,exports.Polyfill=g):"function"==typeof define&&define.amd?define((function(){return e?n:g})):e||(t["Promise"]=g);var o="pending",r="sealed",i="fulfilled",f="rejected",c=function(){};function u(t){return"[object Array]"===Object.prototype.toString.call(t)}var a,s="undefined"!==typeof setImmediate?setImmediate:setTimeout,h=[];function l(){for(var t=0;t<h.length;t++)h[t][0](h[t][1]);h=[],a=!1}function p(t,n){h.push([t,n]),a||(a=!0,s(l,0))}function d(t,n){function e(t){w(n,t)}function o(t){_(n,t)}try{t(e,o)}catch(r){o(r)}}function y(t){var n=t.owner,e=n.state_,o=n.data_,r=t[e],c=t.then;if("function"===typeof r){e=i;try{o=r(o)}catch(u){_(c,u)}}v(c,o)||(e===i&&w(c,o),e===f&&_(c,o))}function v(t,n){var e;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"===typeof n||"object"===typeof n)){var o=n.then;if("function"===typeof o)return o.call(n,(function(o){e||(e=!0,n!==o?w(t,o):m(t,o))}),(function(n){e||(e=!0,_(t,n))})),!0}}catch(r){return e||_(t,r),!0}return!1}function w(t,n){t!==n&&v(t,n)||m(t,n)}function m(t,n){t.state_===o&&(t.state_=r,t.data_=n,p(j,t))}function _(t,n){t.state_===o&&(t.state_=r,t.data_=n,p(P,t))}function b(t){var n=t.then_;t.then_=void 0;for(var e=0;e<n.length;e++)y(n[e])}function j(t){t.state_=i,b(t)}function P(t){t.state_=f,b(t)}function g(t){if("function"!==typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof g===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],d(t,this)}g.prototype={constructor:g,state_:o,then_:null,data_:void 0,then:function(t,n){var e={owner:this,then:new this.constructor(c),fulfilled:t,rejected:n};return this.state_===i||this.state_===f?p(y,e):this.then_.push(e),e.then},catch:function(t){return this.then(null,t)}},g.all=function(t){var n=this;if(!u(t))throw new TypeError("You must pass an array to Promise.all().");return new n((function(n,e){var o=[],r=0;function i(t){return r++,function(e){o[t]=e,--r||n(o)}}for(var f,c=0;c<t.length;c++)f=t[c],f&&"function"===typeof f.then?f.then(i(c),e):o[c]=f;r||n(o)}))},g.race=function(t){var n=this;if(!u(t))throw new TypeError("You must pass an array to Promise.race().");return new n((function(n,e){for(var o,r=0;r<t.length;r++)o=t[r],o&&"function"===typeof o.then?o.then(n,e):n(o)}))},g.resolve=function(t){var n=this;return t&&"object"===typeof t&&t.constructor===n?t:new n((function(n){n(t)}))},g.reject=function(t){var n=this;return new n((function(n,e){e(t)}))}})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);