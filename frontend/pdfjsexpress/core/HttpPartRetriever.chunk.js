(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[0],{366:function(t,e,r){r.r(e),r.d(e,"ByteRangeRequest",(function(){return E}));var s=r(2),n=r(0);r.n(n);var i=r(1),a=r(127);t=r(80);var u=r(207),o=r(62),c=r(58),h=r(206),f=r(139);r=r(302);var l,d=[],p=[],O=window,b=function(){return function(){this.ck=1}}();(function(t){t[t.UNSENT=0]="UNSENT",t[t.DONE=4]="DONE"})(l||(l={}));var E=function(){function t(t,e,r,s){var i=this;this.url=t,this.range=e,this.me=r,this.withCredentials=s,this.NU=l,this.request=new XMLHttpRequest,this.request.open("GET",this.url,!0),O.Uint8Array&&(this.request.responseType="arraybuffer"),s&&(this.request.withCredentials=s),y.DISABLE_RANGE_HEADER||(Object(n.isUndefined)(e.stop)?this.request.setRequestHeader("Range","bytes="+e.start):this.request.setRequestHeader("Range",["bytes=",e.start,"-",e.stop-1].join(""))),this.request.setRequestHeader("X-Requested-With","XMLHttpRequest"),r&&Object.keys(r).forEach((function(t){i.request.setRequestHeader(t,r[t])})),this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):this.request.setRequestHeader("Accept-Charset","x-user-defined"),this.status=h.a.NOT_STARTED}return t.prototype.start=function(t){var e=this,r=this.request;r.onreadystatechange=function(){if(e.aborted)return e.status=h.a.ABORTED,t({code:h.a.ABORTED});if(this.readyState===e.NU.DONE){e.ny();var s=0===window.document.URL.indexOf("file:///");200===r.status||206===r.status||s&&0===r.status?(s=O.BM(this),e.SG(s,t)):(e.status=h.a.ERROR,t({code:e.status,status:e.status}))}},this.request.send(null),this.status=h.a.STARTED},t.prototype.SG=function(t,e){if(this.status=h.a.SUCCESS,e)return e(!1,t)},t.prototype.abort=function(){this.ny(),this.aborted=!0,this.request.abort()},t.prototype.ny=function(){var e=Object(f.c)(this.url,this.range,p);if(-1!==e&&p.splice(e,1),0<d.length){e=d.shift();var r=new t(e.url,e.range,this.me,this.withCredentials);e.request=r,p.push(e),r.start(Object(f.d)(e))}},t.prototype.extend=function(t){var e=Object.assign({},this,t.prototype);return e.constructor=t,e},t}(),y=function(t){function e(e,r,s,n,i){return s=t.call(this,e,s,n)||this,s.ek={},s.Tw=r,s.url=e,s.DISABLE_RANGE_HEADER=!1,s.iu=E,s.EH=3,s.me=i||{},s}return Object(s.c)(e,t),e.prototype.os=function(t,e,r){var s=-1===t.indexOf("?")?"?":"&";switch(r){case!1:case c.a.NEVER_CACHE:t=t+s+"_="+Object(n.uniqueId)();break;case!0:case c.a.CACHE:t=t+s+"_="+e.start+","+(Object(n.isUndefined)(e.stop)?"":e.stop)}return t},e.prototype.PK=function(t,e,r,s){return void 0===r&&(r={}),new this.iu(t,e,r,s)},e.prototype.V_=function(t,e,r,s,i){for(var a=0;a<d.length;a++)if(Object(n.isEqual)(d[a].range,e)&&Object(n.isEqual)(d[a].url,t))return d[a].zf.push(s),d[a].fz++,null;for(a=0;a<p.length;a++)if(Object(n.isEqual)(p[a].range,e)&&Object(n.isEqual)(p[a].url,t))return p[a].zf.push(s),p[a].fz++,null;return r={url:t,range:e,Tw:r,zf:[s],fz:1},0===d.length&&p.length<this.EH?(p.push(r),r.request=this.PK(t,e,i,this.withCredentials),r):(d.push(r),null)},e.prototype.Al=function(t,e,r){var s=this.os(t,e,this.Tw);return(t=this.V_(s,e,this.Tw,r,this.me))&&t.request.start(Object(f.d)(t)),function(){var t=Object(f.c)(s,e,p);if(-1!==t){var r=--p[t].fz;0===r&&p[t].request&&p[t].request.abort()}else t=Object(f.c)(s,e,d),-1!==t&&(r=--d[t].fz,0===r&&d.splice(t,1))}},e.prototype.jM=function(){return{start:-a.a}},e.prototype.h3=function(){var t=-(a.a+a.e);return{start:t-a.d,end:t}},e.prototype.cq=function(t){var e=this;this.$w=!0;var r=a.a;this.Al(this.url,this.jM(),(function(s,n,a){function c(){var r=e.cd.fM();e.Al(e.url,r,(function(s,n){return s?(Object(i.j)("Error loading central directory: "+s),t(s)):(n=Object(o.a)(n),n.length!==r.stop-r.start?t("Invalid XOD file: Zip central directory data is wrong size! Should be "+(r.stop-r.start)+" but is "+n.length):(e.cd.yP(n),e.xC=!0,e.$w=!1,t(!1)))}))}if(s)return Object(i.j)("Error loading end header: "+s),t(s,n,a);if(n=Object(o.a)(n),n.length!==r)return t("Invalid XOD file: Zip end header data is wrong size!");try{e.cd=new u.a(n)}catch(h){return t(h)}e.cd.N4?e.Al(e.url,e.h3(),(function(r,s){if(r)return Object(i.j)("Error loading zip64 header: "+r),t(r);s=Object(o.a)(s),e.cd.d5(s),c()})):c()}))},e.prototype.zM=function(t){t(Object.keys(this.cd.fl))},e.prototype.JF=function(t,e){var r=this;if(this.cd.JK(t)){var s=this.cd.gy(t);if(s in this.ek){var n=this.Ag[t];n.Zo=this.ek[s],n.Zo.ck++,n.cancel=n.Zo.cancel}else{var a=this.cd.z1(t),u=this.Al(this.url,a,(function(n,u){n?(Object(i.j)('Error loading part "'+t+'": '+n),r.Al(r.url,a,(function(n,i){if(n)return e(n,t);r.CP(i,a,s,t,e)}))):r.CP(u,a,s,t,e)})),o=this.Ag[t];o&&(o.wR=!0,o.cancel=function(){o.Zo.ck--,0===o.Zo.ck&&(u(),delete r.ek[s])},this.ek[s]=new b(s),o.Zo=this.ek[s],o.Zo.cancel=o.cancel)}}else delete this.Ag[t],e(Error('File not found: "'+t+'"'),t)},e.prototype.CP=function(t,e,r,s,n){if(t.length!==e.stop-e.start)n(Error("Part data is wrong size!"),s);else{do{if(!this.ek[r])return;s=this.ek[r].ck;for(var i=e.Rn.length,a=0;a<i;++a){var u=e.Rn[a];n(!1,u.On,t["string"===typeof t?"substring":"subarray"](u.start,u.stop),this.cd.vN(u.On)),u.On in this.Ag&&delete this.Ag[u.On]}}while(s!==this.ek[r].ck);delete this.ek[r]}},e.DISABLE_RANGE_HEADER=!1,e.EH=3,e}(t.a);(function(t){function e(e,r,s){var i,a=t.call(this)||this;for(i in e)a[i]=e[i];return a.bga=e,a.startOffset=r,a.endOffset=s,a.PK=function(t,r,s,i){return Object(n.isUndefined)(r.stop)?(r.start+=a.endOffset,r.stop=a.endOffset):(r.start+=a.startOffset,r.stop+=a.startOffset),t=a.os(a.url,r,a.Tw),new e.iu(t,r,s,i)},a}Object(s.c)(e,t)})(y),Object(r.a)(y),Object(r.b)(y),e["default"]=y}}])}).call(this||window);