(globalThis["webpackChunknexar_xm"]=globalThis["webpackChunknexar_xm"]||[]).push([[613],{60613:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>kt});a(46727);var s=a(59835),l=a(86970),r=a(48500),o=a.n(r),i=a(30453),n=a.n(i),c=a(54254),d=a.n(c);const u=e=>((0,s.dD)("data-v-d0c657e6"),e=e(),(0,s.Cn)(),e),p={id:"container",class:"fit row wrap justify-start items-start content-start"},m={class:"col q-pa-md"},v={id:"line1",class:"row wrap"},g={class:"col-12"},w={class:"row"},_={class:"col q-ml-md q-my-auto"},h={class:"row"},f=u((()=>(0,s._)("img",{src:o()},null,-1))),y=u((()=>(0,s._)("div",{class:"addCardTitle text-dart q-my-sm"},[(0,s.Uk)(" Adicionar"),(0,s._)("br"),(0,s.Uk)("Usuário ")],-1))),x={class:"btn-grad addCards text-center q-ma-xs"},b=u((()=>(0,s._)("img",{src:n()},null,-1))),U=u((()=>(0,s._)("div",{class:"addCardTitle text-dark q-my-sm"},[(0,s.Uk)(" Adicionar"),(0,s._)("br"),(0,s.Uk)("Capa ")],-1))),q={class:"btn-grad addCards text-center q-ma-xs"},j=u((()=>(0,s._)("img",{src:d()},null,-1))),k=u((()=>(0,s._)("div",{class:"addCardTitle text-dark q-my-sm"},"Preferências",-1))),W={id:"team",class:"col teamCard q-mt-md"},S=u((()=>(0,s._)("div",{class:"text-dark q-mb-sm",dense:""},[(0,s._)("div",{class:"text-h6 text-center"},"Expediente Ativo")],-1))),C={class:"col-4 q-pa-md"},$={id:"team",class:"col teamCard"},z=u((()=>(0,s._)("div",{class:"text-dark q-mb-sm",dense:""},[(0,s._)("div",{class:"text-h6 text-center"},"Time Técnico")],-1))),V={class:"q-pa-md dlgUpload"},Z={class:"row full-width text-center justify-center q-mb-lg"},Q={class:"q-gutter-sm text-dark"},E={class:"row full-width"},D=u((()=>(0,s._)("div",{class:"col"},null,-1))),H={class:"col-7 justify-center"},I=u((()=>(0,s._)("div",{class:"col"},null,-1))),P={class:"row full-width text-center justify-center q-gutter-md"},A={class:"col"},M={class:"col"},N={class:"row full-width q-gutter-md"},T={class:"col-5"},G={class:"col-grow text-center"},O=u((()=>(0,s._)("div",{class:"row full-width"},[(0,s._)("div",{class:"text-subtitle1 text-weight-light text-dark q-ml-lg"}," Exames atribuídos ")],-1))),B={class:"row full-width justify-center"},L={class:"q-pa-md q-gutter-sm text-center"},F={key:0,class:"row absolute-center"},R={class:"col text-center"},Y=u((()=>(0,s._)("div",{class:"text-h6 text-capitalize"},"Houve um erro",-1))),J={style:{width:"180px"}},K={key:1,class:"row absolute-center"},X={class:"col text-center"},ee=u((()=>(0,s._)("div",{class:"text-h6 text-capitalize"},"Sucesso!",-1))),te={class:"text-left",style:{width:"300px"}},ae=u((()=>(0,s._)("div",{class:"row full-width justify-center"}," Usuário Criado ",-1))),se={class:"row full-width justify-center"},le={class:"row full-width justify-center"},re=u((()=>(0,s._)("div",{class:"row full-width justify-center text-center text-caption"}," *Este usuário deverá acessar o sistema usando este email, na a opção 'Primeiro Acesso'. ",-1))),oe={class:"float-right q-mt-sm"};function ie(e,t,a,r,o,i){const n=(0,s.up)("project-score"),c=(0,s.up)("q-avatar"),d=(0,s.up)("online-users-list"),u=(0,s.up)("lista-usuarios"),ie=(0,s.up)("q-page"),ne=(0,s.up)("q-radio"),ce=(0,s.up)("q-input"),de=(0,s.up)("q-step"),ue=(0,s.up)("q-option-group"),pe=(0,s.up)("q-toggle"),me=(0,s.up)("q-icon"),ve=(0,s.up)("q-btn"),ge=(0,s.up)("q-stepper-navigation"),we=(0,s.up)("q-stepper"),_e=(0,s.up)("q-form"),he=(0,s.up)("q-dialog");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(ie,{padding:""},{default:(0,s.w5)((()=>[(0,s._)("div",p,[(0,s._)("div",m,[(0,s._)("div",v,[(0,s._)("div",g,[(0,s._)("div",w,[(0,s.Wm)(n,{projectid:r.projectid},null,8,["projectid"])])]),(0,s._)("div",_,[(0,s._)("div",h,[(0,s._)("div",{class:"btn-grad addCards text-center q-ma-xs",onClick:t[0]||(t[0]=e=>r.showNewUser())},[(0,s.Wm)(c,{size:"50px","font-size":"52px",color:"white","text-color":"white",class:"q-mt-sm"},{default:(0,s.w5)((()=>[f])),_:1}),y]),(0,s._)("div",x,[(0,s.Wm)(c,{size:"50px","font-size":"52px",color:"white","text-color":"white",class:"q-mt-sm"},{default:(0,s.w5)((()=>[b])),_:1}),U]),(0,s._)("div",q,[(0,s.Wm)(c,{size:"50px","font-size":"52px",color:"white","text-color":"white",class:"q-mt-sm"},{default:(0,s.w5)((()=>[j])),_:1}),k])])])]),(0,s._)("div",W,[S,(0,s.Wm)(d,{users:r.onlineUsers,height:30},null,8,["users"])])]),(0,s._)("div",C,[(0,s._)("div",$,[z,(0,s.Wm)(u,{boxsize:"64"})])])])])),_:1}),(0,s.Wm)(he,{modelValue:r.dlgNewUser,"onUpdate:modelValue":t[17]||(t[17]=e=>r.dlgNewUser=e),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s._)("div",V,[(0,s.Wm)(_e,{greedy:"",autofocus:""},{default:(0,s.w5)((()=>[(0,s.Wm)(we,{modelValue:r.step,"onUpdate:modelValue":t[16]||(t[16]=e=>r.step=e),ref:"stepper","alternative-labels":"",color:"primary",animated:""},{navigation:(0,s.w5)((()=>[(0,s.Wm)(ge,null,{default:(0,s.w5)((()=>[(0,s.Wm)(ve,{outline:"",rounded:"",onClick:t[13]||(t[13]=()=>{r.navigate(r.step,"ff"),3==r.step?this.finish(!1):e.$refs.stepper.next()}),color:"primary",label:3===r.step?"Fechar":"Continuar"},null,8,["label"]),r.step>1&&""!=r.errorMessage.value?((0,s.wg)(),(0,s.j4)(ve,{key:0,flat:"",color:"primary",onClick:t[14]||(t[14]=()=>{r.navigate(r.step,"rw"),3==r.step?this.finish(!0):e.$refs.stepper.previous()}),label:3===r.step?"Novo":"Voltar",class:"q-ml-sm"},null,8,["label"])):(0,s.kq)("",!0),(0,s._)("div",oe,[(0,s.Wm)(ve,{size:"sm",color:"primary",label:"cancelar",flat:"",onClick:t[15]||(t[15]=e=>r.finish(!1))})])])),_:1})])),default:(0,s.w5)((()=>[(0,s.Wm)(de,{name:1,title:"Credenciamento",caption:"Segurança e Acesso",icon:"settings",done:r.step>1,class:"stepH"},{default:(0,s.w5)((()=>[(0,s._)("div",Z,[(0,s._)("div",Q,[(0,s.Wm)(ne,{size:"lg",modelValue:r.newUser.userType,"onUpdate:modelValue":t[1]||(t[1]=e=>r.newUser.userType=e),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"2",label:"Enfermagem"},null,8,["modelValue"]),(0,s.Wm)(ne,{size:"lg",modelValue:r.newUser.userType,"onUpdate:modelValue":t[2]||(t[2]=e=>r.newUser.userType=e),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"3",label:"Médico"},null,8,["modelValue"])])]),(0,s._)("div",E,[D,(0,s._)("div",H,[(0,s.Wm)(ce,{dense:"",modelValue:r.newUser.email,"onUpdate:modelValue":t[3]||(t[3]=e=>r.newUser.email=e),label:"Email*","lazy-rules":"",rules:[e=>e&&e.includes("@")&&e.includes(".")||"Por favor digite um email válido"]},null,8,["modelValue","rules"]),(0,s.Wm)(ce,{dense:"",modelValue:r.newUser.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>r.newUser.phone=e),label:"Fone*","lazy-rules":"",mask:"(##) #####-####",rules:[e=>e&&e.length>2||"Por favor digite o telefone"]},null,8,["modelValue","rules"])]),I])])),_:1},8,["done"]),(0,s.Wm)(de,{name:2,title:"Detalhes",caption:"Dados operacionais",icon:"create_new_folder",done:r.step>2,class:"stepH"},{default:(0,s.w5)((()=>[(0,s._)("div",P,[(0,s._)("div",A,[(0,s.Wm)(ce,{dense:"",modelValue:r.newUser.name,"onUpdate:modelValue":t[5]||(t[5]=e=>r.newUser.name=e),label:"Nome*","lazy-rules":"",rules:[e=>e&&e.length>2||"Por favor o nome"]},null,8,["modelValue","rules"])]),(0,s._)("div",M,[(0,s.Wm)(ce,{dense:"",modelValue:r.newUser.surname,"onUpdate:modelValue":t[6]||(t[6]=e=>r.newUser.surname=e),label:"Sobrenome*","lazy-rules":"",rules:[e=>e&&e.length>2||"Por favor digite o sobrenome"]},null,8,["modelValue","rules"])])]),(0,s._)("div",N,[(0,s._)("div",T,[(0,s.Wm)(ce,{dense:"",modelValue:r.newUser.doc_id,"onUpdate:modelValue":t[7]||(t[7]=e=>r.newUser.doc_id=e),label:"Documento","lazy-rules":"",rules:[e=>e&&e.length>2||"Por favor digite o telefone"]},null,8,["modelValue","rules"])]),(0,s._)("div",G,[(0,s.Wm)(ue,{modelValue:r.newUser.doc_type,"onUpdate:modelValue":t[8]||(t[8]=e=>r.newUser.doc_type=e),options:r.docOptions,primary:"",inline:""},null,8,["modelValue","options"])])]),O,(0,s._)("div",B,[(0,s._)("div",L,[(0,s.Wm)(pe,{color:"primary",label:"ECG",modelValue:r.scope,"onUpdate:modelValue":t[9]||(t[9]=e=>r.scope=e),val:"ECG"},null,8,["modelValue"]),(0,s.Wm)(pe,{disable:"",color:e.disable?e.secondary:e.primary,label:"EEG",modelValue:r.newUser.scope,"onUpdate:modelValue":t[10]||(t[10]=e=>r.newUser.scope=e),val:"EEG"},null,8,["color","modelValue"]),(0,s.Wm)(pe,{disable:"",color:"disable == true ? 'grey' : 'green'",label:"ESP",modelValue:r.newUser.scope,"onUpdate:modelValue":t[11]||(t[11]=e=>r.newUser.scope=e),val:"ESP"},null,8,["modelValue"]),(0,s.Wm)(pe,{disable:"",color:"green",label:"DMD",modelValue:r.newUser.scope,"onUpdate:modelValue":t[12]||(t[12]=e=>r.newUser.scope=e),val:"DMD"},null,8,["modelValue"])])])])),_:1},8,["done"]),(0,s.Wm)(de,{name:3,title:"Confirmação",icon:"add_comment",class:"stepH"},{default:(0,s.w5)((()=>{var e,t,a,o,i;return[r.errorMessage?((0,s.wg)(),(0,s.iD)("div",F,[(0,s._)("div",R,[Y,(0,s.Wm)(me,{name:"error_outline",size:"40px",color:"red"}),(0,s._)("div",J,(0,l.zw)(r.errorMessage),1)])])):(0,s.kq)("",!0),r.res?((0,s.wg)(),(0,s.iD)("div",K,[(0,s._)("div",X,[ee,(0,s.Wm)(me,{name:"verified_user",size:"60px",color:"teal"}),(0,s._)("div",te,[ae,(0,s._)("div",se,(0,l.zw)(null===(e=r.res.data)||void 0===e||null===(t=e.insert_nxm_users.returning[0])||void 0===t?void 0:t.name)+" "+(0,l.zw)(null===(a=r.res.data)||void 0===a||null===(o=a.insert_nxm_users.returning[0])||void 0===o?void 0:o.surname),1),(0,s._)("div",le,(0,l.zw)(null===(i=r.res.data)||void 0===i?void 0:i.insert_nxm_users.returning[0].email),1),re])])])):(0,s.kq)("",!0)]})),_:1})])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["modelValue"])],64)}var ne=a(60499),ce=a(65992),de=a(58163),ue=(a(6827),a(55834));const pe={class:"q-ma-xs"},me=["src"],ve={class:"row"};function ge(e,t,a,r,o,i){const n=(0,s.up)("q-icon"),c=(0,s.up)("q-input"),d=(0,s.up)("q-badge"),u=(0,s.up)("q-avatar"),p=(0,s.up)("q-item-section"),m=(0,s.up)("q-item-label"),v=(0,s.up)("q-item"),g=(0,s.up)("q-list"),w=(0,s.up)("q-scroll-area");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",pe,[(0,s.Wm)(c,{outlined:"",modelValue:r.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>r.searchQuery=e),label:"Buscar",dense:""},{append:(0,s.w5)((()=>[(0,s.Wm)(n,{size:"xs",color:"secondary",name:"backspace",onClick:t[0]||(t[0]=e=>r.searchQuery=""),class:"cursor-pointer"})])),_:1},8,["modelValue"])]),(0,s.Wm)(w,{style:(0,l.j5)({height:a.boxsize+"vh"})},{default:(0,s.w5)((()=>[(0,s.Wm)(g,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.filteredList,(e=>((0,s.wg)(),(0,s.j4)(v,{key:e.id,clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{top:"",avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{color:"teal-2",class:"text-dark"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{color:2==e.type?"green":"orange",rounded:"",class:"absolute-top-left shadow-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(2==e.type?"E":"M"),1)])),_:2},1032,["color"]),null!=e.avatar?((0,s.wg)(),(0,s.iD)("img",{key:0,src:e.avatar},null,8,me)):(0,s.kq)("",!0),(0,s.Uk)(" "+(0,l.zw)(r.getInitials(e.name,e.surname)),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.name)+" "+(0,l.zw)(e.surname),1)])),_:2},1024),(0,s.Wm)(m,{caption:""},{default:(0,s.w5)((()=>[(0,s._)("div",ve,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.scope,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"",key:e},[(0,s.Wm)(d,{color:"secondary",class:"q-mr-sm text-dark"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e),1)])),_:2},1024)])))),128))])])),_:2},1024),(0,s.Wm)(m,{caption:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.phone),1)])),_:2},1024),(0,s.Wm)(m,{caption:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.email),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["style"])],64)}var we=a(94886);a(46675);const _e={name:"ListaUsuario",props:{boxsize:String},created(){this.emitter.on("userAdded",(()=>{this.refetch({project:1,active:!0,type:[2,3]})}))},setup(e){const t=(0,s.f3)("emitter"),a=(e,t)=>{const a=e+" "+t;return a.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase()},l=((0,ne.Vh)(e),(0,ne.iH)("")),r="https://i.pravatar.cc/300",o=(0,ne.iH)(null),i=(0,de.A)(),n=(0,s.Fl)((()=>o.value?o.value.filter((function(e){var t=new RegExp(l.value,"i");return t.test(e.name)||t.test(e.surname)||t.test(e.scope)||t.test(e.email)||t.test(e.phone)})):[])),c=(0,ne.qj)({project:1,active:!0,type:[2,3]}),{result:d,refetch:u,error:p}=(0,we.aM)(ue.ZP`
        query users($project: jsonb!, $active: Boolean!, $type: [Int!]) {
          users: nxm_users(
            where: {
              projects: { _contains: $project }
              active: { _eq: $active }
              type: { _in: $type }
            }
            order_by: { name: asc }
          ) {
            id
            name
            surname
            phone
            email
            doc_id
            type
            avatar
            scope
          }
        }
      `,c);return(0,s.m0)((()=>{if(d.value){const e=d.value;i.$state.users=e.users,o.value=e.users}})),(0,s.bv)((()=>{c.active=!0,c.project=JSON.parse(sessionStorage.getItem("loggedUser"))["projects"],c.type=[2,3]})),{users:o,defaultAvatar:r,filteredList:n,searchQuery:l,getInitials:a,emitter:t,refetch:u}}};var he=a(11639),fe=a(66611),ye=a(22857),xe=a(66663),be=a(13246),Ue=a(490),qe=a(76749),je=a(61357),ke=a(20990),We=a(33115),Se=a(69984),Ce=a.n(Se);const $e=(0,he.Z)(_e,[["render",ge],["__scopeId","data-v-92b31f22"]]),ze=$e;Ce()(_e,"components",{QInput:fe.Z,QIcon:ye.Z,QScrollArea:xe.Z,QList:be.Z,QItem:Ue.Z,QItemSection:qe.Z,QAvatar:je.Z,QBadge:ke.Z,QItemLabel:We.Z});const Ve=["src"],Ze={class:"row"};function Qe(e,t,a,r,o,i){const n=(0,s.up)("q-badge"),c=(0,s.up)("q-avatar"),d=(0,s.up)("q-item-section"),u=(0,s.up)("q-item-label"),p=(0,s.up)("q-item"),m=(0,s.up)("q-list"),v=(0,s.up)("q-scroll-area");return(0,s.wg)(),(0,s.j4)(v,{style:{height:"30vh"}},{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.users,(e=>((0,s.wg)(),(0,s.j4)(p,{key:e.id,clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{top:"",avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{color:"teal","text-color":"white"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{color:2==e.type?"green":"orange",rounded:"",class:"absolute-top-left shadow-1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(2==e.type?"E":"M"),1)])),_:2},1032,["color"]),null!=e.avatar?((0,s.wg)(),(0,s.iD)("img",{key:0,src:e.avatar},null,8,Ve)):(0,s.kq)("",!0),(0,s.Uk)(" "+(0,l.zw)(r.getInitials(e.name)),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.name)+" "+(0,l.zw)(e.surname),1)])),_:2},1024),(0,s.Wm)(u,{caption:""},{default:(0,s.w5)((()=>[(0,s._)("div",Ze,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.scope,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"",key:e},[(0,s.Wm)(n,{color:"secondary",class:"q-mr-sm text-dark"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e),1)])),_:2},1024)])))),128))])])),_:2},1024),(0,s.Wm)(u,{caption:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.phone),1)])),_:2},1024),(0,s.Wm)(u,{caption:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.email),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};const Ee={name:"OnlineUsersList",props:{users:null,height:Number},setup(e){const t=(0,ne.Vh)(e.users),a=(0,ne.Vh)(e.height),s=e=>e.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase(),l=["teal","teal-1","teal-2","teal-3","teal-4","teal-5","teal-6","teal-7","teal-8","teal-9","teal-10","teal-11","teal-12","teal-13","teal-14","green","green-1","green-2","green-3","green-4","green-5","green-6","green-7","green-8","green-9","green-10","green-11","green-12","green-13","green-14","cyan","cyan-1","cyan-2","cyan-3","cyan-4","cyan-5","cyan-6","cyan-7","cyan-8","cyan-9","cyan-10","cyan-11","cyan-12","cyan-13","cyan-14"],r=()=>{let e=l.sort((()=>.5-Math.random()))[0];return e};return{usersOnline:t,boxSize:a,getInitials:s,rndColor:r,avatarColors:l}}},De=(0,he.Z)(Ee,[["render",Qe]]),He=De;Ce()(Ee,"components",{QScrollArea:xe.Z,QList:be.Z,QItem:Ue.Z,QItemSection:qe.Z,QAvatar:je.Z,QBadge:ke.Z,QItemLabel:We.Z});var Ie=a(75100),Pe=a.n(Ie);const Ae={id:"scores",class:"row full-width q-pa-sm q-mx-lg q-mb-lg shadow-22 scoreCard"},Me={class:"col"},Ne={class:"scoreCard text-center"},Te={class:"absolute-bottom"},Ge=(0,s._)("img",{src:Pe()},null,-1),Oe={class:"row-grow text-center"},Be={class:"text-h6 text-dark"},Le=(0,s._)("div",{class:"text-grey relative-position",style:{top:"-8px"}}," plantão em andamento ",-1),Fe={class:"col justify-center q-mb-md"},Re={class:"row text-center full-width"},Ye={class:"col"},Je={class:"text-h5 text-dark text-bold"},Ke=(0,s._)("div",{class:"scoreItem text-dark relative-position",style:{top:"-8px"}}," aguardando ",-1),Xe={class:"col"},et={class:"text-h5 text-dark text-bold"},tt={class:"scoreItem text-dark relative-position",style:{top:"-8px"}},at={class:"col"},st={class:"text-h5 text-dark text-bold"},lt={class:"scoreItem text-dark relative-position",style:{top:"-8px"}},rt={class:"col-grow"},ot={class:"col-grow q-ml-lg relative-position"},it={class:"float-right q-mt-lg"};function nt(e,t,a,r,o,i){const n=(0,s.up)("q-circular-progress"),c=(0,s.up)("q-avatar"),d=(0,s.up)("q-btn"),u=(0,s.up)("q-btn-group"),p=(0,s.up)("apexchart");return(0,s.wg)(),(0,s.iD)("div",Ae,[(0,s._)("div",Me,[(0,s._)("div",Ne,[(0,s.Wm)(c,{size:"80px","font-size":"52px",color:"white","text-color":"white",class:"q-mt-sm"},{default:(0,s.w5)((()=>[(0,s._)("div",Te,[(0,s.Wm)(n,{indeterminate:"",size:"20px",thickness:.4,"font-size":"50px",color:"teal","track-color":"grey-4","center-color":"white",class:"q-ma-md",onClick:t[0]||(t[0]=e=>r.doUpdate())},null,8,["thickness"])]),Ge])),_:1}),(0,s._)("div",Oe,[(0,s._)("div",Be,"Agora "+(0,l.zw)(r.category),1),Le]),(0,s._)("div",Fe,[(0,s.Wm)(u,{class:"btn-grad text-dark"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{glossy:"",label:"ECG",onClick:t[1]||(t[1]=e=>r.reCat("ECG"))}),(0,s.Wm)(d,{glossy:"",label:"EEG",onClick:t[2]||(t[2]=e=>r.reCat("EEG"))}),(0,s.Wm)(d,{glossy:"",label:"ESP",onClick:t[3]||(t[3]=e=>r.reCat("ESP"))}),(0,s.Wm)(d,{glossy:"",label:"DMD",onClick:t[4]||(t[4]=e=>r.reCat("DMD"))})])),_:1})]),(0,s._)("div",Re,[(0,s._)("div",Ye,[(0,s._)("div",Je,(0,l.zw)(r.waiting.toString().padStart(2,"0")),1),Ke]),(0,s._)("div",Xe,[(0,s._)("div",et,(0,l.zw)(r.appraised.toString().padStart(2,"0")),1),(0,s._)("div",tt,(0,l.zw)(r.appraised>1?"laudados":"laudado"),1)]),(0,s._)("div",at,[(0,s._)("div",st,(0,l.zw)(r.rejected.toString().padStart(2,"0")),1),(0,s._)("div",lt,(0,l.zw)(r.rejected>1?"rejeitados":"rejeitado"),1)])])])]),(0,s._)("div",rt,[(0,s._)("div",ot,[(0,s._)("div",it,[(0,s.Wm)(p,{ref:"$piechart",width:"350",type:"pie",options:r.chartOptions,series:i.series,color:"white"},null,8,["options","series"])])])])])}const ct={name:"ProjectScore",props:{projectid:Number},data(){return{project_num:this.projectid}},methods:{updateChart(){console.log("updateChart")}},created(){this.emitter.on("updateChart",this.updateChart())},computed:{series:function(){return[this.coreStore.$state.waiting,this.coreStore.$state.appraised,this.coreStore.$state.rejected]}},setup(e){const t=(0,s.f3)("emitter"),a=(0,ne.iH)(null),l=(0,de.A)(),r=(0,ne.iH)(""),o=(0,ne.qj)({pollInterval:6e4}),i=(0,ne.qj)({project:1,category:"ECG"}),n=(0,ne.iH)(e.projectid),c=(0,ne.iH)("ECG"),d=(0,s.Fl)((()=>l.$state.waiting)),u=(0,s.Fl)((()=>l.$state.appraised)),p=(0,s.Fl)((()=>l.$state.rejected)),{result:m,refetch:v,error:g}=(0,we.aM)(ue.ZP`
        query scoreproj($project: Int!, $category: String!) {
          projectscore(args: { proj: $project, cat: $category }) {
            status
            total
          }
        }
      `,i,o),w=e=>{r.value=e;const t=JSON.parse(sessionStorage.getItem("loggedUser"))["projects"][0];a.value.updateSeries([0,1,0],!0),v({project:t,category:e}),_()},_=()=>{console.log("DO UPDATE!"),a.value.updateSeries([1,1,1]),a.value.updateSeries([l.$state.waiting,l.$state.appraised,l.$state.rejected],!0)},h=(0,ne.iH)({labels:["Aguardando","Laudados","Rejeitados"],dataLabels:{distributed:!0,offsetX:10,offsetY:10},noData:{text:"nada aqui",align:"center"},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:400}}}});return(0,s.m0)((()=>{if(m.value){var e,a,s,r,o,i;const n=m.value;console.log("THE NEW RETURN >>>>",n),l.$state.waiting=null!==(e=null===(a=n.projectscore.find((e=>1===e.status)))||void 0===a?void 0:a.total)&&void 0!==e?e:0,l.$state.appraised=null!==(s=null===(r=n.projectscore.find((e=>2===e.status)))||void 0===r?void 0:r.total)&&void 0!==s?s:0,l.$state.rejected=null!==(o=null===(i=n.projectscore.find((e=>3===e.status)))||void 0===i?void 0:i.total)&&void 0!==o?o:0,t.emit("reloadChart")}})),(0,s.bv)((()=>{var e,t;i.projects=null!==(e=null===(t=JSON.parse(sessionStorage.getItem("loggedUser")))||void 0===t?void 0:t.projects)&&void 0!==e?e:[],i.categories="ECG",r.value="ECG"})),{emitter:t,setupCateg:c,setupProject:n,result:m,refetch:v,variables:i,coreStore:l,waiting:d,appraised:u,rejected:p,reCat:w,category:r,chartOptions:h,doUpdate:_,$piechart:a}}};var dt=a(83302),ut=a(67236),pt=a(24455);const mt=(0,he.Z)(ct,[["render",nt]]),vt=mt;Ce()(ct,"components",{QAvatar:je.Z,QCircularProgress:dt.Z,QBtnGroup:ut.Z,QBtn:pt.Z});const gt={name:"ProjectPage",components:{ListaUsuarios:ze,OnlineUsersList:He,ProjectScore:vt},data(){return{}},setup(){const e=(0,de.A)(),t=(0,s.f3)("emitter"),a=(0,ne.iH)(""),l=(0,ne.iH)(""),r=(0,ne.iH)(1),o=((0,ce.v0)(),(0,ne.iH)({access_level:"1",active:!0,doc_id:"",doc_type:"",doc_uf:"SP",email:"",name:"",phone:"",projects:[],scope:["ECG"],surname:"",userType:1})),i=(0,ne.iH)({...o.value}),n=(0,ne.iH)(!1),c=(0,ne.iH)(2),d=(0,ne.iH)(""),u=(0,ne.iH)(["ECG"]),p=()=>n.value=!n.value,m=e=>{e||(n.value=!1),r.value=1,a.value="",Object.assign(i.value,o.value),t.emit("userAdded")},v=(0,s.Fl)((()=>e.$state.onlineUsers.filter((e=>e.type<4)))),g=(0,s.Fl)((()=>JSON.parse(sessionStorage.getItem("loggedUser"))["projects"][0])),w=async(e,a)=>{2==e&&(i.value.scope=u,i.value.projects=JSON.parse(sessionStorage.getItem("loggedUser"))["projects"],"ff"==a&&t.emit("insertDBUser",i))},_=(0,ne.iH)([{label:"COREN",value:"COREN"},{label:"CRM",value:"CRM"}]),h=(0,ne.iH)("");return{emitter:t,searchQuery:d,dlgNewUser:n,showNewUser:p,docOptions:_,doc_type:h,scope:u,userType:c,newUser:i,frmNewUser:o,step:r,navigate:w,res:a,errorMessage:l,onlineUsers:v,finish:m,projectid:g,coreStore:e}},methods:{insertDBUser(e){try{this.$apollo.mutate({mutation:ue.ZP`
              mutation insertuser(
                $access_level: String!
                $active: Boolean!
                $doc_id: String!
                $doc_type: String!
                $doc_uf: String!
                $email: String!
                $name: String!
                $phone: String!
                $projects: jsonb!
                $scope: jsonb!
                $surname: String!
                $type: Int!
              ) {
                insert_nxm_users(
                  objects: {
                    access_level: $access_level
                    active: $active
                    doc_id: $doc_id
                    doc_type: $doc_type
                    doc_uf: $doc_uf
                    email: $email
                    name: $name
                    phone: $phone
                    projects: $projects
                    scope: $scope
                    surname: $surname
                    type: $type
                  }
                ) {
                  returning {
                    id
                    email
                    name
                    surname
                  }
                }
              }
            `,variables:{access_level:"1",active:!0,doc_id:e.value.doc_id,doc_type:e.value.doc_type,doc_uf:"SP",email:e.value.email,name:e.value.name,phone:e.value.phone,projects:e.value.projects,scope:e.value.scope,surname:e.value.surname,type:e.value.userType}}).then((e=>{this.errorMessage="",this.res=e})).catch((e=>{this.errorMessage=e,console.log(e)}))}catch(t){this.errorMessage=t}}},created(){this.emitter.on("insertDBUser",(e=>this.insertDBUser(e)))}};var wt=a(69885),_t=a(32074),ht=a(8326),ft=a(8225),yt=a(46017),xt=a(11480),bt=a(2286),Ut=a(23175),qt=a(21992);const jt=(0,he.Z)(gt,[["render",ie],["__scopeId","data-v-d0c657e6"]]),kt=jt;Ce()(gt,"components",{QPage:wt.Z,QAvatar:je.Z,QDialog:_t.Z,QForm:ht.Z,QStepper:ft.Z,QStep:yt.Z,QRadio:xt.Z,QInput:fe.Z,QOptionGroup:bt.Z,QToggle:Ut.Z,QIcon:ye.Z,QStepperNavigation:qt.Z,QBtn:pt.Z})},30453:(e,t,a)=>{e.exports=a.p+"img/cover2.c491c8b2.webp"},54254:(e,t,a)=>{e.exports=a.p+"img/messages.fcc24d71.jpeg"},75100:(e,t,a)=>{e.exports=a.p+"img/score.285f69a5.jpeg"},48500:(e,t,a)=>{e.exports=a.p+"img/users.c6c11181.png"}}]);