"use strict";(globalThis["webpackChunknexar_xm"]=globalThis["webpackChunknexar_xm"]||[]).push([[278],{5278:(e,t,o)=>{o.r(t),o.d(t,{default:()=>lo});var l=o(59835);const a={id:"container",class:"fit row wrap justify-start items-start content-start"},s={class:"col-4 q-pa-md q-px-0 q-gutter-sm teamCard"},r={class:"col q-pa-md q-px-0 q-gutter-sm"},n={class:"col q-pa-md q-px-0 q-gutter-sm teamCard",style:{height:"85vh"}},i=(0,l.Uk)("Users"),c=(0,l.Uk)("All");function d(e,t,o,d,u,p){const m=(0,l.up)("project-list"),_=(0,l.up)("senders-list"),v=(0,l.up)("appraisers-list"),g=(0,l.up)("team-list"),w=(0,l.up)("q-bt"),j=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(j,{padding:""},{default:(0,l.w5)((()=>[(0,l._)("div",a,[(0,l._)("div",s,[(0,l.Wm)(m)]),(0,l._)("div",r,[(0,l.Wm)(_),(0,l.Wm)(v)]),(0,l._)("div",n,[(0,l.Wm)(g),(0,l._)("div",null,[(0,l.Wm)(w,{onClick:t[0]||(t[0]=t=>e.refresh(1))},{default:(0,l.w5)((()=>[i])),_:1}),(0,l.Wm)(w,{onClick:t[1]||(t[1]=t=>e.refresh(2))},{default:(0,l.w5)((()=>[c])),_:1})])])])])),_:1})}var u=o(60499),p=(o(65992),o(58163)),m=(o(6827),o(43878)),_=o.n(m),v=o(55834),g=o(86970);const w=e=>((0,l.dD)("data-v-833e4d68"),e=e(),(0,l.Cn)(),e),j={class:"row-grow"},f={bordered:"",class:"col gradBG text-white teamCard",style:{height:"50vh"}},h={class:"text-subtitle1 text-dark cardTitle q-px-md"},b={class:"row full-width text-center"},y={class:"col"},P={class:"row-grow scoreCounter"},q=w((()=>(0,l._)("div",{class:"row-grow relative-position",style:{top:"-15px"}}," aguardando ",-1))),$={class:"col"},x={class:"row-grow scoreCounter"},U=w((()=>(0,l._)("div",{class:"row-grow relative-position",style:{top:"-15px"}}," laudado ",-1))),S={class:"col"},D={class:"row-grow scoreCounter"},C=w((()=>(0,l._)("div",{class:"row-grow relative-position",style:{top:"-15px"}}," rejeitado ",-1))),E={class:"row-grow"},W={class:"col q-pa-sm teamCard"},V={class:"row full-width bg-white"},Z=w((()=>(0,l._)("div",{class:"col-4"},"Projeto:",-1))),k={class:"col-grow q-ml-md"},H={class:"row full-width bg-white"},I=w((()=>(0,l._)("div",{class:"col-4"},"Responsável:",-1))),Q={class:"col-grow q-ml-md"},z={class:"row full-width bg-white"},O=w((()=>(0,l._)("div",{class:"col-4"},"Email:",-1))),F={class:"col-grow q-ml-md"},T={class:"row full-width bg-white"},N=w((()=>(0,l._)("div",{class:"col-4"},"Telefone:",-1))),G={class:"col-grow q-ml-md"},M={class:"row q-mt-md full-width text-center justify-center"},R=w((()=>(0,l._)("div",{class:"text-subtitle1 text-weight-light"},"Exames Habilitados",-1))),A={class:"col q-mt-md text-center justify-center"};function L(e,t,o,a,s,r){const n=(0,l.up)("q-tab"),i=(0,l.up)("q-tabs"),c=(0,l.up)("q-card-section"),d=(0,l.up)("q-card"),u=(0,l.up)("q-expansion-item"),p=(0,l.up)("q-list"),m=(0,l.up)("q-scroll-area"),_=(0,l.up)("q-option-group"),v=(0,l.up)("q-btn"),w=(0,l.up)("q-btn-group");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",j,[(0,l._)("div",f,[(0,l.Wm)(m,{class:"full-height"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{bordered:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.projectList,((e,o)=>((0,l.wg)(),(0,l.j4)(u,{dark:"",onShow:t=>a.setProject(e.id),key:e.id,"default-opened":0==o,group:"projects",icon:"contact_mail",label:e.project_name,caption:`Responsável:  ${e.project_contact_name}`},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"teamCard q-pa-md container text-dark q-ma-sm"},{default:(0,l.w5)((()=>[(0,l._)("div",h," Tempo de espera: "+(0,g.zw)(a.ellapsed)+" minutos ",1),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:a.tab,"onUpdate:modelValue":t[4]||(t[4]=e=>a.tab=e),"narrow-indicator":"",dense:"",align:"justify",class:"text-dark"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{ripple:!1,name:"ecg",icon:"favorite_border",label:"ECG",onClick:t[0]||(t[0]=e=>a.rescore("ECG"))}),(0,l.Wm)(n,{ripple:!1,name:"eeg",icon:"psychology",label:"EEG",onClick:t[1]||(t[1]=e=>a.rescore("EEG"))}),(0,l.Wm)(n,{ripple:!1,name:"esp",icon:"record_voice_over",label:"ESP",onClick:t[2]||(t[2]=e=>a.rescore("ESP"))}),(0,l.Wm)(n,{ripple:!1,name:"dmd",icon:"soap",label:"DMD",onClick:t[3]||(t[3]=e=>a.rescore("DMD"))})])),_:1},8,["modelValue"]),(0,l._)("div",b,[(0,l._)("div",y,[(0,l._)("div",P,(0,g.zw)(a.waiting.toString().padStart(2,"0")),1),q]),(0,l._)("div",$,[(0,l._)("div",x,(0,g.zw)(a.appraised.toString().padStart(2,"0")),1),U]),(0,l._)("div",S,[(0,l._)("div",D,(0,g.zw)(a.rejected.toString().padStart(2,"0")),1),C])])])),_:1})])),_:1})])),_:2},1032,["onShow","default-opened","label","caption"])))),128))])),_:1})])),_:1})])]),(0,l._)("div",E,[(0,l._)("div",W,[(0,l._)("div",V,[Z,(0,l._)("div",k,(0,g.zw)(a.currentProject.project_name),1)]),(0,l._)("div",H,[I,(0,l._)("div",Q,(0,g.zw)(a.currentProject.project_contact_name),1)]),(0,l._)("div",z,[O,(0,l._)("div",F,(0,g.zw)(a.currentProject.project_contact_email),1)]),(0,l._)("div",T,[N,(0,l._)("div",G,(0,g.zw)(a.currentProject.project_contact_phone),1)]),(0,l._)("div",M,[R,(0,l.Wm)(_,{inline:"",options:a.optExams,type:"toggle",modelValue:a.scope,"onUpdate:modelValue":t[5]||(t[5]=e=>a.scope=e)},null,8,["options","modelValue"])])]),(0,l._)("div",A,[(0,l.Wm)(w,{spread:""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{color:"primary",glossy:"",icon:"person",onClick:t[6]||(t[6]=e=>a.newMedic())}),(0,l.Wm)(v,{color:"primary",glossy:"",icon:"medical_services",onClick:t[7]||(t[7]=e=>a.newProject())})])),_:1})])])],64)}const B={name:"ProjectList",data(){return{}},setup(){const e=(0,l.f3)("emitter"),t=(0,u.iH)("ecg"),o=(0,u.iH)(!1),a=(0,u.iH)(0),s=(0,l.Fl)((()=>n.$state.ellapsed)),r=(0,u.iH)([{label:"ECG",value:"ECG"},{label:"EEG",value:"EEG"},{label:"ESP",value:"ESP"},{label:"DMD",value:"DMD"}]),n=(0,p.A)(),i=(0,l.Fl)((()=>n.$state.nodeProjects)),c=(0,l.Fl)((()=>n.$state.currentProject)),d=(0,l.Fl)((()=>n.$state.currentProject.scope)),m=(0,l.Fl)((()=>{const e=0==n.$state.score.length?[{status:0,total:0},{status:1,total:0},{status:2,total:0}]:n.$state.score;return e})),_=(0,l.Fl)((()=>n.$state.waiting)),v=(0,l.Fl)((()=>n.$state.appraised)),g=(0,l.Fl)((()=>n.$state.rejected)),w=t=>{e.emit("refetch",t);const o=i.value.find((e=>e.id==t));a.value=t,n.$state.currentProject=o,d.value=o.scope},j=t=>{const o=n.$state.currentProject.id,l={id:o,category:t};e.emit("rescore",l)},f=()=>{e.emit("newProject")},h=()=>{e.emit("newUser")};return{coreStore:n,projectList:i,tab:t,active:o,setProject:w,currentProject:c,newProject:f,newMedic:h,scope:d,score:m,rescore:j,optExams:r,ellapsed:s,waiting:_,appraised:v,rejected:g}}};var K=o(11639),Y=o(66663),J=o(13246),X=o(50651),ee=o(44458),te=o(63190),oe=o(47817),le=o(70900),ae=o(2286),se=o(67236),re=o(24455),ne=o(69984),ie=o.n(ne);const ce=(0,K.Z)(B,[["render",L],["__scopeId","data-v-833e4d68"]]),de=ce;ie()(B,"components",{QScrollArea:Y.Z,QList:J.Z,QExpansionItem:X.Z,QCard:ee.Z,QCardSection:te.Z,QTabs:oe.Z,QTab:le.Z,QOptionGroup:ae.Z,QBtnGroup:se.Z,QBtn:re.Z});const ue={class:"q-pa-md q-gutter-md",style:{"max-width":"350px"}},pe=(0,l._)("div",{class:"text-subtitle1"},"Enviando neste Projeto",-1),me={class:"row"},_e={style:{"font-size":"9px"}};function ve(e,t,o,a,s,r){const n=(0,l.up)("q-icon"),i=(0,l.up)("q-item-section"),c=(0,l.up)("q-item-label"),d=(0,l.up)("q-badge"),u=(0,l.up)("q-item"),p=(0,l.up)("q-list"),m=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.iD)("div",ue,[pe,(0,l.Wm)(p,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.senders,(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(u,{clickable:"",active:a.isOnline(e.doc_id),key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{name:"signal_wifi_off"})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.name+" "+e.surname),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(i,{thumbnail:""},{default:(0,l.w5)((()=>[(0,l._)("div",me,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.scope,((e,t)=>((0,l.wg)(),(0,l.j4)(d,{class:"q-mr-xs",outline:"",key:t,color:"grey"},{default:(0,l.w5)((()=>[(0,l._)("div",_e,(0,g.zw)(e),1)])),_:2},1024)))),128))])])),_:2},1024)])),_:2},1032,["active"])),[[m]]))),128))])),_:1})])}const ge={name:"SendersList",setup(){const e=(0,u.iH)(!1),t=(0,p.A)(),o=(0,l.Fl)((()=>t.$state.onlineUsers.filter((e=>2==e.type)))),a=e=>o.value.some((t=>t.id==e)),s=(0,l.Fl)((()=>{const e=t.$state.projectUsers.filter((e=>2==e.type));return console.log("THE SENDERS >>>>",e),e}));return{active:e,senders:s,coreStore:t,onlineUsers:o,isOnline:a}}};var we=o(490),je=o(76749),fe=o(22857),he=o(33115),be=o(20990),ye=o(51136);const Pe=(0,K.Z)(ge,[["render",ve]]),qe=Pe;ie()(ge,"components",{QList:J.Z,QItem:we.Z,QItemSection:je.Z,QIcon:fe.Z,QItemLabel:he.Z,QBadge:be.Z}),ie()(ge,"directives",{Ripple:ye.Z});const $e={class:"q-pa-md q-gutter-md",style:{"max-width":"350px"}},xe=(0,l._)("div",{class:"text-subtitle1"},"Laudando neste Projeto",-1),Ue={style:{"font-size":"9px"}};function Se(e,t,o,a,s,r){const n=(0,l.up)("q-icon"),i=(0,l.up)("q-item-section"),c=(0,l.up)("q-label"),d=(0,l.up)("q-badge"),u=(0,l.up)("q-item"),p=(0,l.up)("q-list"),m=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.iD)("div",$e,[xe,(0,l.Wm)(p,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.appraisers,(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(u,{clickable:"",active:a.isOnline(e.doc_id),key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{name:"signal_wifi_off"})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.name+" "+e.surname),1)])),_:2},1024),(0,l.Wm)(c,{caption:"",lines:"2"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.scope,((e,t)=>((0,l.wg)(),(0,l.j4)(d,{class:"q-mr-xs",outline:"",key:t,color:"grey"},{default:(0,l.w5)((()=>[(0,l._)("div",Ue,(0,g.zw)(e),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024),(0,l.Wm)(i,{thumbnail:""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{color:"primary",class:"q-ma-xs",name:"remove_circle_outline",title:"Adicionar ao projeto",onClick:t=>a.removeFromProject(e.doc_id,e.projects)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["active"])),[[m]]))),128))])),_:1})])}const De={name:"AppraisersList",setup(){const e=(0,l.f3)("emitter"),t=(0,u.iH)(!1),o=e=>n.value.some((t=>t.id==e)),a=(0,p.A)(),s=(t,o)=>{const l=a.$state.currentProject.id,s={userID:t,userProjects:o};e.emit("removeFromProject",s),e.emit("refetch",l)},r=(0,l.Fl)((()=>{const e=a.$state.projectUsers.filter((e=>1==e.type));return console.log("THE USERS 1 >>>>",e),e})),n=(0,l.Fl)((()=>a.$state.onlineUsers.filter((e=>1==e.type))));return{active:t,appraisers:r,coreStore:a,isOnline:o,onlineUsers:n,removeFromProject:s}}},Ce=(0,K.Z)(De,[["render",Se]]),Ee=Ce;ie()(De,"components",{QList:J.Z,QItem:we.Z,QItemSection:je.Z,QIcon:fe.Z,QBadge:be.Z}),ie()(De,"directives",{Ripple:ye.Z});const We={class:"q-pa-md q-gutter-md",style:{"max-width":"350px"}},Ve=(0,l._)("div",{class:"text-subtitle1"},"Time Médico",-1),Ze={style:{"font-size":"9px"}};function ke(e,t,o,a,s,r){const n=(0,l.up)("q-icon"),i=(0,l.up)("q-item-section"),c=(0,l.up)("q-item-label"),d=(0,l.up)("q-badge"),u=(0,l.up)("q-item"),p=(0,l.up)("q-list"),m=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.iD)("div",We,[Ve,(0,l.Wm)(p,{bordered:"",separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.medics,(e=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(u,{active:a.isOnline(e.doc_id),key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{name:"person"})])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,g.zw)(e.name+" "+e.surname),1)])),_:2},1024),(0,l.Wm)(c,{caption:"",lines:"2"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.scope,((e,t)=>((0,l.wg)(),(0,l.j4)(d,{class:"q-mr-xs",outline:"",key:t,color:"grey"},{default:(0,l.w5)((()=>[(0,l._)("div",Ze,(0,g.zw)(e),1)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024),(0,l.Wm)(i,{thumbnail:""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{color:"primary",class:"q-ma-xs",name:"add_circle_outline",title:"Adicionar ao projeto",onClick:t=>a.addToProject(e.doc_id)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["active"])),[[m]]))),128))])),_:1})])}const He={name:"TeamList",setup(){const e=(0,l.f3)("emitter"),t=(0,u.iH)(!1),o=(0,p.A)(),a=(0,l.Fl)((()=>o.$state.onlineUsers.filter((e=>2==e.type)))),s=t=>{e.emit("addToProject",t);const l=o.$state.currentProject.id;e.emit("refetch",l)},r=e=>a.value.some((t=>t.id==e)),n=(0,l.Fl)((()=>{const e=o.$state.nodeUsers.filter((e=>1==e.type));return e}));return{active:t,medics:n,coreStore:o,onlineUsers:a,isOnline:r,addToProject:s}}},Ie=(0,K.Z)(He,[["render",ke]]),Qe=Ie;ie()(He,"components",{QList:J.Z,QItem:we.Z,QItemSection:je.Z,QIcon:fe.Z,QItemLabel:he.Z,QBadge:be.Z}),ie()(He,"directives",{Ripple:ye.Z});var ze=o(19302);o(46727);const Oe=e=>((0,l.dD)("data-v-54c74cde"),e=e(),(0,l.Cn)(),e),Fe={class:"q-pa-md dlgUpload"},Te={class:"col q-mx-lg justify-left"},Ne={class:"row full-width text-center justify-center q-gutter-md"},Ge={class:"col q-mx-lg justify-left"},Me=Oe((()=>(0,l._)("div",{class:"row full-width"},[(0,l._)("div",{class:"text-subtitle1 text-weight-light text-dark q-ml-lg"}," Exames Habilitados ")],-1))),Re={class:"row full-width justify-center"},Ae={class:"q-pa-md q-gutter-sm text-center"},Le={key:0,class:"row absolute-center"},Be={class:"col text-center"},Ke=Oe((()=>(0,l._)("div",{class:"text-h6 text-capitalize"},"Houve um erro",-1))),Ye={style:{width:"180px"}},Je={key:1,class:"row absolute-center"},Xe={class:"col text-center"},et=Oe((()=>(0,l._)("div",{class:"text-h6 text-capitalize"},"Sucesso!",-1))),tt={class:"text-left",style:{width:"300px"}},ot=Oe((()=>(0,l._)("div",{class:"row full-width justify-center"}," Projeto Criado ",-1))),lt={class:"row full-width justify-center"},at={class:"row full-width justify-center"},st=Oe((()=>(0,l._)("div",{class:"row full-width justify-center text-center text-caption"}," *Este usuário deverá acessar o sistema usando este email, na a opção 'Primeiro Acesso'. ",-1))),rt={class:"float-right q-mt-sm"};function nt(e,t,o,a,s,r){const n=(0,l.up)("q-input"),i=(0,l.up)("q-step"),c=(0,l.up)("q-toggle"),d=(0,l.up)("q-icon"),u=(0,l.up)("q-btn"),p=(0,l.up)("q-stepper-navigation"),m=(0,l.up)("q-stepper"),_=(0,l.up)("q-form"),v=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(v,{ref:"dialogRef",onHide:a.onDialogHide},{default:(0,l.w5)((()=>[(0,l._)("div",Fe,[(0,l.Wm)(_,{greedy:"",autofocus:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:a.step,"onUpdate:modelValue":t[13]||(t[13]=e=>a.step=e),ref:"stepper","alternative-labels":"",color:"primary",animated:""},{navigation:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{outline:"",rounded:"",onClick:t[10]||(t[10]=()=>{a.navigate(a.step,"ff"),3==a.step?this.finish(!1):e.$refs.stepper.next()}),color:"primary",label:3===a.step?"Fechar":"Continuar"},null,8,["label"]),a.step>1&&""!=a.errorMessage.value?((0,l.wg)(),(0,l.j4)(u,{key:0,flat:"",color:"primary",onClick:t[11]||(t[11]=()=>{a.navigate(a.step,"rw"),3==a.step?this.finish(!0):e.$refs.stepper.previous()}),label:3===a.step?"Novo":"Voltar",class:"q-ml-sm"},null,8,["label"])):(0,l.kq)("",!0),(0,l._)("div",rt,[(0,l.Wm)(u,{size:"sm",color:"primary",label:"cancelar",flat:"",onClick:t[12]||(t[12]=e=>a.finish(!1))})])])),_:1})])),default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:1,title:"Credenciamento",caption:"Segurança e Acesso",icon:"settings",done:a.step>1,class:"stepH"},{default:(0,l.w5)((()=>[(0,l._)("div",Te,[(0,l.Wm)(n,{"input-style":"font-size:large;",modelValue:a.newProject.project_name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.newProject.project_name=e),label:"Nome do Projeto*",filled:"","lazy-rules":"",rules:[e=>e&&e.length>4||"Por favor digite algo"]},null,8,["modelValue","rules"]),(0,l.Wm)(n,{dense:"",modelValue:a.newProject.project_contact_name,"onUpdate:modelValue":t[1]||(t[1]=e=>a.newProject.project_contact_name=e),label:"Nome do contato*","lazy-rules":"",rules:[e=>e&&e.length>4||"Por favor digite algo"]},null,8,["modelValue","rules"]),(0,l.Wm)(n,{dense:"",modelValue:a.newProject.project_contact_email,"onUpdate:modelValue":t[2]||(t[2]=e=>a.newProject.project_contact_email=e),label:"Email do Contato*","lazy-rules":"",rules:[e=>e&&e.includes("@")&&e.includes(".")||"Por favor digite um email válido"]},null,8,["modelValue","rules"]),(0,l.Wm)(n,{dense:"",modelValue:a.newProject.project_contact_phone,"onUpdate:modelValue":t[3]||(t[3]=e=>a.newProject.project_contact_phone=e),label:"Fone do Contato*","lazy-rules":"",rules:[e=>e&&e.length>4||"Por favor digite algo"]},null,8,["modelValue","rules"])])])),_:1},8,["done"]),(0,l.Wm)(i,{name:2,title:"Detalhes",caption:"Dados operacionais",icon:"create_new_folder",done:a.step>2,class:"stepH"},{default:(0,l.w5)((()=>[(0,l._)("div",Ne,[(0,l._)("div",Ge,[(0,l.Wm)(n,{modelValue:a.newProject.logo,"onUpdate:modelValue":t[4]||(t[4]=e=>a.newProject.logo=e),label:"Logomarca*",disable:a.itmDisabled,"lazy-rules":"",rules:[e=>e&&e.length>4||"Por favor digite algo"]},null,8,["modelValue","disable","rules"]),(0,l.Wm)(n,{modelValue:a.newProject.cover,"onUpdate:modelValue":t[5]||(t[5]=e=>a.newProject.cover=e),label:"Capa dos exames*",disable:a.itmDisabled,"lazy-rules":"",rules:[e=>e&&e.length>4||"Por favor digite algo"]},null,8,["modelValue","disable","rules"])])]),Me,(0,l._)("div",Re,[(0,l._)("div",Ae,[(0,l.Wm)(c,{color:"primary",label:"ECG",modelValue:a.scope,"onUpdate:modelValue":t[6]||(t[6]=e=>a.scope=e),val:"ECG"},null,8,["modelValue"]),(0,l.Wm)(c,{disable:a.itmDisabled,color:e.disable?e.secondary:e.primary,label:"EEG",modelValue:a.newProject.scope,"onUpdate:modelValue":t[7]||(t[7]=e=>a.newProject.scope=e),val:"EEG"},null,8,["disable","color","modelValue"]),(0,l.Wm)(c,{disable:a.itmDisabled,color:"disable == true ? 'grey' : 'green'",label:"ESP",modelValue:a.newProject.scope,"onUpdate:modelValue":t[8]||(t[8]=e=>a.newProject.scope=e),val:"ESP"},null,8,["disable","modelValue"]),(0,l.Wm)(c,{disable:a.itmDisabled,color:"green",label:"DMD",modelValue:a.newProject.scope,"onUpdate:modelValue":t[9]||(t[9]=e=>a.newProject.scope=e),val:"DMD"},null,8,["disable","modelValue"])])])])),_:1},8,["done"]),(0,l.Wm)(i,{name:3,title:"Confirmação",icon:"add_comment",class:"stepH"},{default:(0,l.w5)((()=>{var e,t;return[a.errorMessage?((0,l.wg)(),(0,l.iD)("div",Le,[(0,l._)("div",Be,[Ke,(0,l.Wm)(d,{name:"error_outline",size:"40px",color:"red"}),(0,l._)("div",Ye,(0,g.zw)(a.errorMessage),1)])])):(0,l.kq)("",!0),a.recentProject.project_name?((0,l.wg)(),(0,l.iD)("div",Je,[(0,l._)("div",Xe,[et,(0,l.Wm)(d,{name:"verified_user",size:"60px",color:"teal"}),(0,l._)("div",tt,[ot,(0,l._)("div",lt,(0,g.zw)(null===(e=a.recentProject)||void 0===e?void 0:e.project_name),1),(0,l._)("div",at,(0,g.zw)(null===(t=a.recentProject)||void 0===t?void 0:t.project_contact_email),1),st])])])):(0,l.kq)("",!0)]})),_:1})])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["onHide"])}o(40702);var it=o(84182);const ct={emits:[...it.Z.emits],setup(){const e=(0,p.A)(),t=(0,l.f3)("emitter"),o=(0,u.iH)(1),a=(0,u.iH)(!0),s=(0,u.iH)(!1),r=(0,u.iH)(""),n=(0,u.iH)({project_name:"",project_contact_email:"",project_contact_phone:"",project_contact_name:"",exams_contacts:[],logo:"",cover:"",node:0,scope:["ECG"],userType:4}),i=(0,u.iH)({...n.value}),c=(0,u.iH)(4),d=()=>JSON.parse(sessionStorage.getItem("loggedUser"))["nodes"][0],m=(0,u.iH)(["ECG"]),_=async(e,o)=>{2==e&&(i.value.scope=m,i.value.projects=JSON.parse(sessionStorage.getItem("loggedUser"))["projects"],"ff"==o&&t.emit("insertDBProject",i))},v=e=>{e?(o.value=1,Object.assign(i.value,n.value),t.emit("projectAdded"),f()):h()},g=(0,l.Fl)((()=>e.$state.newProject)),{dialogRef:w,onDialogHide:j,onDialogOK:f,onDialogCancel:h}=(0,it.Z)();return(0,l.bv)((()=>{i.value.node=d()})),{step:o,coreStore:e,dialogRef:w,newProject:i,recentProject:g,dlgNewProject:s,finish:v,userType:c,onDialogHide:j,navigate:_,itmDisabled:a,errorMessage:r,scope:m,onOKClick(){f()},onCancelClick:h}}};var dt=o(32074),ut=o(8326),pt=o(8225),mt=o(46017),_t=o(66611),vt=o(23175),gt=o(21992);const wt=(0,K.Z)(ct,[["render",nt],["__scopeId","data-v-54c74cde"]]),jt=wt;ie()(ct,"components",{QDialog:dt.Z,QForm:ut.Z,QStepper:pt.Z,QStep:mt.Z,QInput:_t.Z,QToggle:vt.Z,QIcon:fe.Z,QStepperNavigation:gt.Z,QBtn:re.Z});const ft=e=>((0,l.dD)("data-v-ddd8a3aa"),e=e(),(0,l.Cn)(),e),ht={class:"q-pa-md dlgUpload"},bt={class:"row full-width text-center justify-center q-mb-xs"},yt={class:"q-gutter-xs text-dark"},Pt={class:"row full-width"},qt=ft((()=>(0,l._)("div",{class:"col"},null,-1))),$t={class:"col-7 justify-center"},xt=ft((()=>(0,l._)("div",{class:"col"},null,-1))),Ut={class:"row full-width text-center justify-center q-gutter-md"},St={class:"col"},Dt={class:"col"},Ct={class:"row full-width q-gutter-md"},Et={class:"col-5"},Wt={class:"col-grow text-center"},Vt=ft((()=>(0,l._)("div",{class:"row full-width"},[(0,l._)("div",{class:"text-subtitle1 text-weight-light text-dark q-ml-lg"}," Exames atribuídos ")],-1))),Zt={class:"row full-width justify-center"},kt={class:"q-pa-md q-gutter-sm text-center"},Ht={key:0,class:"row absolute-center"},It={class:"col text-center"},Qt=ft((()=>(0,l._)("div",{class:"text-h6 text-capitalize"},"Houve um erro",-1))),zt={style:{width:"180px"}},Ot={key:1,class:"row absolute-center"},Ft={class:"col text-center"},Tt=ft((()=>(0,l._)("div",{class:"text-h6 text-capitalize"},"Sucesso!",-1))),Nt={class:"text-left",style:{width:"300px"}},Gt=ft((()=>(0,l._)("div",{class:"row full-width justify-center"}," Usuário Criado ",-1))),Mt={class:"row full-width justify-center"},Rt={class:"row full-width justify-center"},At=ft((()=>(0,l._)("div",{class:"row full-width justify-center text-center text-caption"}," *Este usuário deverá acessar o sistema usando este email, na a opção 'Primeiro Acesso'. ",-1))),Lt={class:"float-right q-mt-sm"};function Bt(e,t,o,a,s,r){const n=(0,l.up)("q-radio"),i=(0,l.up)("q-input"),c=(0,l.up)("q-step"),d=(0,l.up)("q-option-group"),u=(0,l.up)("q-toggle"),p=(0,l.up)("q-icon"),m=(0,l.up)("q-btn"),_=(0,l.up)("q-stepper-navigation"),v=(0,l.up)("q-stepper"),w=(0,l.up)("q-form"),j=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(j,{ref:"dialogRef",onHide:a.onDialogHide},{default:(0,l.w5)((()=>[(0,l._)("div",ht,[(0,l.Wm)(w,{greedy:"",autofocus:""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{modelValue:a.step,"onUpdate:modelValue":t[16]||(t[16]=e=>a.step=e),ref:"stepper","alternative-labels":"",color:"primary",animated:""},{navigation:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{outline:"",rounded:"",onClick:t[13]||(t[13]=()=>{a.navigate(a.step,"ff"),3==a.step?this.finish(!1):e.$refs.stepper.next()}),color:"primary",label:3===a.step?"Fechar":"Continuar"},null,8,["label"]),a.step>1&&""!=a.errorMessage.value?((0,l.wg)(),(0,l.j4)(m,{key:0,flat:"",color:"primary",onClick:t[14]||(t[14]=()=>{a.navigate(a.step,"rw"),3==a.step?this.finish(!0):e.$refs.stepper.previous()}),label:3===a.step?"Novo":"Voltar",class:"q-ml-sm"},null,8,["label"])):(0,l.kq)("",!0),(0,l._)("div",Lt,[(0,l.Wm)(m,{size:"sm",color:"primary",label:"cancelar",flat:"",onClick:t[15]||(t[15]=e=>a.finish(!1))})])])),_:1})])),default:(0,l.w5)((()=>[(0,l.Wm)(c,{name:1,title:"Credenciamento",caption:"Segurança e Acesso",icon:"settings",done:a.step>1,class:"stepH"},{default:(0,l.w5)((()=>[(0,l._)("div",bt,[(0,l._)("div",yt,[(0,l.Wm)(n,{size:"lg",modelValue:a.newUser.userType,"onUpdate:modelValue":t[0]||(t[0]=e=>a.newUser.userType=e),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"2",label:"Enfermagem"},null,8,["modelValue"]),(0,l.Wm)(n,{size:"lg",modelValue:a.newUser.userType,"onUpdate:modelValue":t[1]||(t[1]=e=>a.newUser.userType=e),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"1",label:"Médico"},null,8,["modelValue"])])]),(0,l._)("div",Pt,[qt,(0,l._)("div",$t,[(0,l.Wm)(i,{dense:"",modelValue:a.newUser.email,"onUpdate:modelValue":t[2]||(t[2]=e=>a.newUser.email=e),label:"Email*","lazy-rules":"",rules:[e=>e&&e.includes("@")&&e.includes(".")||"Por favor digite um email válido"]},null,8,["modelValue","rules"]),(0,l.Wm)(i,{dense:"",modelValue:a.newUser.phone,"onUpdate:modelValue":t[3]||(t[3]=e=>a.newUser.phone=e),label:"Fone*","lazy-rules":"",mask:"(##) #####-####",rules:[e=>e&&e.length>2||"Por favor digite o telefone"]},null,8,["modelValue","rules"]),(0,l.Wm)(i,{readonly:e.readOnlyInfo,dense:"","unmasked-value":"",modelValue:a.newUser.cpf,"onUpdate:modelValue":t[4]||(t[4]=e=>a.newUser.cpf=e),label:"CPF*","lazy-rules":"",mask:"###.###.###-##",rules:[e=>a.testarCPF(e)||"CPF inválido"]},null,8,["readonly","modelValue","rules"])]),xt])])),_:1},8,["done"]),(0,l.Wm)(c,{name:2,title:"Detalhes",caption:"Dados operacionais",icon:"create_new_folder",done:a.step>2,class:"stepH"},{default:(0,l.w5)((()=>[(0,l._)("div",Ut,[(0,l._)("div",St,[(0,l.Wm)(i,{dense:"",modelValue:a.newUser.name,"onUpdate:modelValue":t[5]||(t[5]=e=>a.newUser.name=e),label:"Nome*","lazy-rules":"",rules:[e=>e&&e.length>2||"Por favor o nome"]},null,8,["modelValue","rules"])]),(0,l._)("div",Dt,[(0,l.Wm)(i,{dense:"",modelValue:a.newUser.surname,"onUpdate:modelValue":t[6]||(t[6]=e=>a.newUser.surname=e),label:"Sobrenome*","lazy-rules":"",rules:[e=>e&&e.length>2||"Por favor digite o sobrenome"]},null,8,["modelValue","rules"])])]),(0,l._)("div",Ct,[(0,l._)("div",Et,[(0,l.Wm)(i,{dense:"",modelValue:a.newUser.doc_id,"onUpdate:modelValue":t[7]||(t[7]=e=>a.newUser.doc_id=e),label:"Documento","lazy-rules":"",rules:[e=>e&&e.length>2||"Por favor digite o telefone"]},null,8,["modelValue","rules"])]),(0,l._)("div",Wt,[(0,l.Wm)(d,{modelValue:a.newUser.doc_type,"onUpdate:modelValue":t[8]||(t[8]=e=>a.newUser.doc_type=e),options:a.docOptions,primary:"",inline:""},null,8,["modelValue","options"])])]),Vt,(0,l._)("div",Zt,[(0,l._)("div",kt,[(0,l.Wm)(u,{color:"primary",label:"ECG",modelValue:a.scope,"onUpdate:modelValue":t[9]||(t[9]=e=>a.scope=e),val:"ECG"},null,8,["modelValue"]),(0,l.Wm)(u,{disable:"",color:e.disable?e.secondary:e.primary,label:"EEG",modelValue:a.newUser.scope,"onUpdate:modelValue":t[10]||(t[10]=e=>a.newUser.scope=e),val:"EEG"},null,8,["color","modelValue"]),(0,l.Wm)(u,{disable:"",color:"disable == true ? 'grey' : 'green'",label:"ESP",modelValue:a.newUser.scope,"onUpdate:modelValue":t[11]||(t[11]=e=>a.newUser.scope=e),val:"ESP"},null,8,["modelValue"]),(0,l.Wm)(u,{disable:"",color:"green",label:"DMD",modelValue:a.newUser.scope,"onUpdate:modelValue":t[12]||(t[12]=e=>a.newUser.scope=e),val:"DMD"},null,8,["modelValue"])])])])),_:1},8,["done"]),(0,l.Wm)(c,{name:3,title:"Confirmação",icon:"add_comment",class:"stepH"},{default:(0,l.w5)((()=>{var e,t,o;return[a.errorMessage?((0,l.wg)(),(0,l.iD)("div",Ht,[(0,l._)("div",It,[Qt,(0,l.Wm)(p,{name:"error_outline",size:"40px",color:"red"}),(0,l._)("div",zt,(0,g.zw)(a.errorMessage),1)])])):(0,l.kq)("",!0),a.recentUser.name?((0,l.wg)(),(0,l.iD)("div",Ot,[(0,l._)("div",Ft,[Tt,(0,l.Wm)(p,{name:"verified_user",size:"60px",color:"teal"}),(0,l._)("div",Nt,[Gt,(0,l._)("div",Mt,(0,g.zw)(null===(e=a.recentUser)||void 0===e?void 0:e.name)+" "+(0,g.zw)(null===(t=a.recentUser)||void 0===t?void 0:t.surname),1),(0,l._)("div",Rt,(0,g.zw)(null===(o=a.recentUser)||void 0===o?void 0:o.email),1),At])])])):(0,l.kq)("",!0)]})),_:1})])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["onHide"])}const Kt={emits:[...it.Z.emits],setup(){const e=(0,p.A)(),t=(0,l.f3)("emitter"),o=(0,u.iH)(1),a=(0,u.iH)(!0),s=(0,u.iH)(!1),r=(0,u.iH)(""),n=(0,u.iH)({access_level:1,active:!0,avatar:null,cpf:"",name:"",surname:"",email:"",phone:"",doc_type:"",doc_id:"",doc_uf:"",node:0,scope:["ECG"],type:1,projects:[],nodes:[]}),i=(0,u.iH)({...n.value}),c=(0,u.iH)(1),d=()=>JSON.parse(sessionStorage.getItem("loggedUser"))["nodes"][0],m=(0,u.iH)(["ECG"]),_=async(e,o)=>{2==e&&(i.value.scope=m,i.value.nodes=JSON.parse(sessionStorage.getItem("loggedUser"))["nodes"],"ff"==o&&t.emit("insertDBUser",i))},v=e=>{var t,o;t=0;let l=0;if("00000000000"==e)return!1;for(l=1;l<=9;l++)t+=parseInt(e.substring(l-1,l))*(11-l);if(o=10*t%11,10!=o&&11!=o||(o=0),o!=parseInt(e.substring(9,10)))return!1;for(t=0,l=1;l<=10;l++)t+=parseInt(e.substring(l-1,l))*(12-l);return o=10*t%11,10!=o&&11!=o||(o=0),o==parseInt(e.substring(10,11))},g=e=>{e?(o.value=1,Object.assign(i.value,n.value),t.emit("userAdded"),b()):y()},w=(0,l.Fl)((()=>e.$state.recentUser)),j=(0,u.iH)([{label:"COREN",value:"COREN"},{label:"CRM",value:"CRM"}]),{dialogRef:f,onDialogHide:h,onDialogOK:b,onDialogCancel:y}=(0,it.Z)();return(0,l.bv)((()=>{i.value.node=d()})),{step:o,coreStore:e,dialogRef:f,newUser:i,recentUser:w,dlgNewProject:s,finish:g,userType:c,docOptions:j,onDialogHide:h,navigate:_,itmDisabled:a,errorMessage:r,testarCPF:v,scope:m,onOKClick(){b()},onCancelClick:y}}};var Yt=o(11480);const Jt=(0,K.Z)(Kt,[["render",Bt],["__scopeId","data-v-ddd8a3aa"]]),Xt=Jt;ie()(Kt,"components",{QDialog:dt.Z,QForm:ut.Z,QStepper:pt.Z,QStep:mt.Z,QRadio:Yt.Z,QInput:_t.Z,QOptionGroup:ae.Z,QToggle:vt.Z,QIcon:fe.Z,QStepperNavigation:gt.Z,QBtn:re.Z});const eo={name:"NodePage",components:{ProjectList:de,SendersList:qe,AppraisersList:Ee,TeamList:Qe},data(){return{optExams:[{label:"ECG",value:"ECG"},{label:"EEG",value:"EEG"},{label:"ESP",value:"ESP"},{label:"DMD",value:"DMD"}],scope:["ECG"]}},apollo:{score:{query:v.ZP`
        query score($project: Int!, $category: String!) {
          projectscore(args: { proj: $project, cat: $category }) {
            status
            total
          }
        }
      `,variables(){return{project:this.projectid,category:"ECG"}},update(e){var t,o,l,a,s,r;console.log("THE SCORE DATA >>>>",e.projectscore);const n=e.projectscore;return this.coreStore.$state.waiting=null!==(t=null===(o=n.filter((e=>1==e.status))[0])||void 0===o?void 0:o.total)&&void 0!==t?t:0,this.coreStore.$state.appraised=null!==(l=null===(a=n.filter((e=>2==e.status))[0])||void 0===a?void 0:a.total)&&void 0!==l?l:0,this.coreStore.$state.rejected=null!==(s=null===(r=n.filter((e=>3==e.status))[0])||void 0===r?void 0:r.total)&&void 0!==s?s:0,this.coreStore.$state.score=n,e}},nodeProjects:{query:v.ZP`
        query getProjects($nodeId: Int!) {
          projects: nxm_projects(where: { node: { _eq: $nodeId } }) {
            id
            cover
            logo
            project_contact_email
            project_contact_name
            project_contact_phone
            project_name
            scope: exams_enabled
          }
        }
      `,variables(){return{nodeId:this.nodeId}},update(e){this.coreStore.$state.nodeProjects=e.projects;const t=e.projects[0];return this.initProject(t.id),e}},team:{query:v.ZP`
        query users($nodeID: jsonb!) {
          users: nxm_users(
            order_by: { name: asc }
            where: {
              active: { _eq: true }
              type: { _lte: 1 }
              nodes: { _contains: $nodeID }
            }
          ) {
            access_level
            avatar
            doc_id
            doc_type
            email
            name
            surname
            scope
            phone
            type
            id
          }
        }
      `,variables(){return{nodeID:this.nodeId}},update(e){return this.coreStore.$state.nodeUsers=e.users,e}},users:{query:v.ZP`
        query users($projectID: jsonb!) {
          users: nxm_users(
            order_by: { name: asc }
            where: {
              projects: { _contains: $projectID }
              active: { _eq: true }
              type: { _lte: 2 }
            }
          ) {
            access_level
            avatar
            doc_id
            doc_type
            email
            name
            projects
            surname
            scope
            phone
            type
            id
          }
        }
      `,variables(){return{projectID:this.projectid}},update(e){return this.coreStore.$state.projectUsers=e.users,e}},node:{query:v.ZP`
        query node($id: Int!) {
          node: nxm_node(where: { id: { _eq: $id }, active: { _eq: true } }) {
            name
          }
        }
      `,variables(){return{id:this.nodeId}},update(e){return this.coreStore.$state.projectName=e.node,e}},ellapsed:{query:v.ZP`
        query ellapsed($id: Int!) {
          ellapsed: nxm_exams(
            where: { project: { _eq: $id }, status: { _eq: 1 } }
            order_by: { created: asc }
            limit: 1
          ) {
            created
          }
        }
      `,variables(){return{id:this.currentProjectId}},update(e){var t;if(null!=(null===(t=e.ellapsed[0])||void 0===t?void 0:t.created)){var o,l;const t=new(_())(null!==(o=null===(l=e.ellapsed[0])||void 0===l?void 0:l.created)&&void 0!==o?o:_()()),a=_().duration(_()().diff(t));console.log("THE FROM >>>>",a);const s=60*a.days()*60+60*a.hours()+a.minutes();console.warn("THE ELLAPSED >>>>>",a),this.coreStore.$state.ellapsed=s}else this.coreStore.$state.ellapsed="sem fila";return e},pollInterval:6e4}},setup(){const e=(0,p.A)(),t=(0,l.f3)("emitter"),o=(0,l.Fl)((()=>e.$state.currentProject.id)),a=(0,u.iH)(2),s=(0,u.iH)(""),r=(0,u.iH)(""),n=(0,u.iH)(!1),i=()=>dlgNewUser.value=!dlgNewUser.value,c=e=>{e||(dlgNewUser.value=!1),step.value=1,res.value="",Object.assign(newUser.value,frmNewUser.value),t.emit("userAdded")},d=e.$state.projectName.name,m=(0,l.Fl)((()=>e.$state.onlineUsers.filter((e=>e.type<4)))),v=(0,l.Fl)((()=>JSON.parse(sessionStorage.getItem("loggedUser"))["projects"][0])),g=(0,l.Fl)((()=>JSON.parse(sessionStorage.getItem("loggedUser"))["nodes"][0])),w=(0,l.Fl)((()=>e.$state.nodeProjects)),j=(0,u.iH)([{label:"COREN",value:"COREN"},{label:"CRM",value:"CRM"}]),f=(0,u.iH)(""),h=t=>{const o=e.$state.nodeProjects[0];e.$state.currentProject=o,e.$state.scope=o.scope,console.log(o)};(0,l.bv)((()=>{_().locale("pt-br")}));const b=(0,ze.Z)(),y=()=>{b.dialog({component:Xt}).onOk((()=>{console.log("OK")})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))},P=()=>{b.dialog({component:jt}).onOk((()=>{console.log("OK")})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))};return{emitter:t,searchQuery:s,showNewUser:i,docOptions:j,doc_type:f,userType:a,active:n,onlineUsers:m,finish:c,projectid:v,coreStore:e,tab:r,nodeName:d,nodeProjects:w,nodeId:g,initProject:h,currentProjectId:o,showDlgProject:P,showDlgUser:y}},methods:{insertDBUser(e){try{this.$apollo.mutate({mutation:v.ZP`
              mutation insertuser(
                $access_level: String!
                $active: Boolean!
                $doc_id: String!
                $doc_type: String!
                $doc_uf: String!
                $email: String!
                $name: String!
                $phone: String!
                $projects: jsonb!
                $nodes: jsonb!
                $scope: jsonb!
                $surname: String!
                $type: Int!
              ) {
                newuser: insert_nxm_users(
                  objects: {
                    access_level: $access_level
                    active: $active
                    doc_id: $doc_id
                    doc_type: $doc_type
                    doc_uf: $doc_uf
                    email: $email
                    name: $name
                    phone: $phone
                    projects: $projects
                    nodes: $nodes
                    scope: $scope
                    surname: $surname
                    type: $type
                  }
                ) {
                  returning {
                    id
                    email
                    name
                    surname
                  }
                }
              }
            `,variables:{access_level:"1",active:!0,doc_id:e.value.doc_id,doc_type:e.value.doc_type,doc_uf:"SP",email:e.value.email,name:e.value.name,phone:e.value.phone,projects:e.value.projects,nodes:e.value.nodes,scope:e.value.scope,surname:e.value.surname,type:e.value.userType}}).then((e=>{this.errorMessage="",console.warn("THE RESPONSE IN USER >>>>>",e.data),this.coreStore.$state.recentUser=e.data.newuser.returning[0],this.$apollo.queries.team.refetch()})).catch((e=>{this.errorMessage=e,console.log(e)}))}catch(t){this.errorMessage=t}},insertDBProject(e){console.warn("THE NEW PROJECT >>>>",e.value);try{var t,o,l;this.$apollo.mutate({mutation:v.ZP`
              mutation insertProject(
                $company_id: Int!
                $cover: String!
                $exams_contacts: jsonb!
                $exams_enabled: jsonb!
                $logo: String!
                $node: Int!
                $project_contact_email: String!
                $project_contact_name: String!
                $project_contact_phone: String!
                $project_name: String!
              ) {
                newproject: insert_nxm_projects_one(
                  object: {
                    company_id: $company_id
                    cover: $cover
                    created: "now()"
                    active: true
                    exams_contacts: $exams_contacts
                    exams_enabled: $exams_enabled
                    logo: $logo
                    node: $node
                    project_contact_email: $project_contact_email
                    project_contact_name: $project_contact_name
                    project_contact_phone: $project_contact_phone
                    project_name: $project_name
                  }
                ) {
                  company_id
                  id
                  project_name
                  project_contact_email
                }
              }
            `,variables:{company_id:0,cover:e.value.cover,exams_contacts:null!==(t=e.value.exams_contacts)&&void 0!==t?t:[],exams_enabled:null!==(o=e.value.scope)&&void 0!==o?o:[],logo:null!==(l=e.value.logo)&&void 0!==l?l:"",node:e.value.node,project_contact_email:e.value.project_contact_email,project_contact_name:e.value.project_contact_name,project_contact_phone:e.value.project_contact_phone,project_name:e.value.project_name}}).then((e=>{this.coreStore.$state.newProject=e.data.newproject,this.$apollo.queries.nodeProjects.refetch()})).catch((e=>{console.log(e)}))}catch(a){console.error(a)}},removeFromProject(e,t){const o=t.filter((e=>e!=this.currentProjectId));try{this.$apollo.mutate({mutation:v.ZP`
              mutation removeFromProject($id: String!, $projects: jsonb!) {
                update_nxm_users(
                  where: { doc_id: { _eq: $id } }
                  _set: { projects: $projects }
                ) {
                  affected_rows
                  returning {
                    doc_id
                    name
                    projects
                  }
                }
              }
            `,variables:{id:e,projects:o}}).then(this.$apollo.queries.users.refetch({projectID:this.coreStore.$state.currentProject.id})).catch((e=>console.log(e)))}catch(l){console.log(l)}},addToProject(e){const t=this.coreStore.$state.currentProject.id;try{this.$apollo.mutate({mutation:v.ZP`
              mutation addToProject($id: String!, $projectID: jsonb!) {
                update_nxm_users(
                  where: { doc_id: { _eq: $id } }
                  _append: { projects: $projectID }
                ) {
                  affected_rows
                }
              }
            `,variables:{id:e,projectID:t}}).then(this.$apollo.queries.users.refetch({projectID:t})).catch((e=>console.log(e)))}catch(o){console.log(o)}}},created(){this.emitter.on("insertDBProject",(e=>this.insertDBProject(e))),this.emitter.on("addToProject",(e=>this.addToProject(e))),this.emitter.on("removeFromProject",(e=>this.removeFromProject(e.userID,e.userProjects))),this.emitter.on("insertDBUser",(e=>this.insertDBUser(e))),this.emitter.on("refetch",(e=>{this.projectid=e,this.$apollo.queries.score.refetch({project:e,category:"ECG"}),this.$apollo.queries.users.refetch({projectID:e}),this.$apollo.queries.ellapsed.refetch({id:e})})),this.emitter.on("rescore",(e=>{console.warn("THE RESCORE PARAMS >>>",e),this.$apollo.queries.score.refetch({project:e.id,category:e.category})})),this.emitter.on("newProject",(()=>this.showDlgProject())),this.emitter.on("newUser",(()=>this.showDlgUser()))}};var to=o(69885);const oo=(0,K.Z)(eo,[["render",d],["__scopeId","data-v-5022f455"]]),lo=oo;ie()(eo,"components",{QPage:to.Z})}}]);